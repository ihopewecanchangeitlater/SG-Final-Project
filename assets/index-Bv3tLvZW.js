var e=Object.defineProperty,t=(t,s,i)=>((t,s,i)=>s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[s]=i)(t,"symbol"!=typeof s?s+"":s,i);import{r as s,g as i}from"./phaser-CLYd3JIB.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var a=s();const o=i(a);class n extends a.Scene{constructor(){super("Preloader")}init(){}preload(){this.load.setPath("assets"),this.load.image("logo","logo.png")}create(){this.scene.start("MainMenu")}}class r extends a.Scene{constructor(){super("MainMenu"),t(this,"background"),t(this,"logo"),t(this,"title")}create(){this.logo=this.add.image(this.sys.game.scale.width/2,this.sys.game.scale.height/2,"logo"),this.logo.setScale(.5),this.title=this.add.text(512,40,"Main Menu",{fontFamily:"Arial Black",fontSize:38,color:"#ffffff",stroke:"#000000",strokeThickness:8,align:"center"}).setOrigin(.5),this.input.once("pointerdown",(()=>{this.scene.start("Game")}))}}class h extends a.Scene{constructor(){super("Game"),t(this,"games",[{key:"DragToCategory",name:"Βρες την Κατηγορία",levels:["level-01","level-02","level-03"]},{key:"FindThePairs",name:"Βρες τα Ζευγάρια",levels:["Easy","Medium","Hard","Expert"]},{key:"NameThePictureScene",name:"Ονόμασε την Εικόνα",levels:[]}]),t(this,"currentMenu","games"),t(this,"selectedGame"),t(this,"titleText"),t(this,"buttons",[]),t(this,"backButton")}create(){const e=this.cameras.main.width/2;this.titleText=this.add.text(e,100,"Επίλεξε Παιχνίδι",{fontFamily:"Segoe UI",fontSize:40,color:"#4a3c31",stroke:"#9c8b70",strokeThickness:2}).setOrigin(.5),this.cameras.main.setBackgroundColor(15921129),this.showGamesMenu()}clearButtons(){this.buttons.forEach((e=>e.destroy())),this.buttons=[],this.backButton&&(this.backButton.destroy(),this.backButton=void 0)}showGamesMenu(){this.currentMenu="games",this.selectedGame=void 0,this.titleText.setText("Επίλεξε Παιχνίδι"),this.clearButtons();const e=this.cameras.main.width/2;this.games.forEach(((t,s)=>{const i=this.createButton(e,220+90*s,t.name);i.on("pointerdown",(()=>this.showLevelsMenu(t))),this.buttons.push(i)}))}showLevelsMenu(e){this.currentMenu="levels",this.selectedGame=e,this.titleText.setText(`Επίλεξε Επίπεδο για το "${e.name}"`),this.clearButtons();const t=220*(e.levels.length-1),s=this.cameras.main.width/2;0===e.levels.length&&this.scene.start(e.key,{}),e.levels.forEach(((i,a)=>{const o=`Επίπεδο ${a+1}`,n=s-t/2+220*a,r=this.createButton(n,280,o);r.on("pointerdown",(()=>{this.scene.start(e.key,{level:i})})),this.buttons.push(r)})),this.backButton=this.createButton(s,380,"← Πίσω"),this.backButton.on("pointerdown",(()=>this.showGamesMenu()))}createButton(e,t,s){const i=this.add.container(e,t),a=this.add.text(0,0,s,{fontFamily:"Segoe UI",fontSize:"20px",color:"#4a3c31"}).setOrigin(.5),o=a.width+40,n=a.height+20;a.destroy();const r=this.add.graphics();r.fillStyle(12562068,1),r.fillRoundedRect(-o/2,-n/2,o,n,20);const h=this.add.text(0,0,s,{fontFamily:"Segoe UI",fontSize:"20px",color:"#4a3c31"}).setOrigin(.5);return i.add([r,h]),i.setInteractive(new Phaser.Geom.Rectangle(-o/2,-n/2,o,n),Phaser.Geom.Rectangle.Contains),i.on("pointerover",(()=>{r.clear(),r.fillStyle(10259312,1),r.fillRoundedRect(-o/2,-n/2,o,n,20)})),i.on("pointerout",(()=>{r.clear(),r.fillStyle(12562068,1),r.fillRoundedRect(-o/2,-n/2,o,n,20)})),i}}class c extends a.Scene{constructor(){super({key:"DragToCategory"}),t(this,"levelKey"),t(this,"levelData"),t(this,"dropZones",{}),t(this,"correctSound"),t(this,"wrongSound"),t(this,"victorySound"),t(this,"correctCount",0),t(this,"totalItems",0),t(this,"helpPanelOpen",!1),this.levelKey="level-01"}init(e){e.level&&(this.levelKey=e.level)}preload(){this.load.image("basket","assets/images/objects/basket.png"),this.load.image("shelf","assets/images/objects/shelf.png"),this.load.image("soundOn","assets/ui/volume-icon.png"),this.load.image("soundOff","assets/ui/volume-icon_off.png"),this.load.audio("correct","assets/audio/correct.mp3"),this.load.audio("wrong","assets/audio/wrong.mp3"),this.load.audio("victory","assets/audio/victory.mp3"),this.load.json(this.levelKey,`data/${this.levelKey}.json`),this.load.once("complete",(()=>{if(this.levelData=this.cache.json.get(this.levelKey),!this.levelData)return console.error("Level data not found"),void this.scene.start("Game");this.levelData.items.forEach((e=>{this.load.image(e.name,e.image)})),this.load.once("complete",(()=>{this.setupLevel()})),this.load.start()})),this.load.start()}create(){this.cameras.main.setBackgroundColor("#8e8782"),this.correctSound=this.sound.add("correct"),this.wrongSound=this.sound.add("wrong"),this.victorySound=this.sound.add("victory"),this.createSoundToggle(),this.createHelpIcon(),this.createExitButton()}setupLevel(){const e=this.scale.width,t=this.scale.height,s=280,i=e/(this.levelData.categories.length+1);this.levelData.categories.forEach(((e,a)=>{const o=i*(a+1),n=t-140,r=this.add.zone(o,n,280,s).setRectangleDropZone(280,s).setData("category",e);this.add.image(o,n,"basket").setDisplaySize(280,s).setDepth(1001).setAlpha(.85),this.add.text(o,n+s/3,e,{fontSize:"30px",color:"#fff",fontFamily:"Arial"}).setOrigin(.5),this.dropZones[e]=r}));const a=this.levelData.items.map((e=>{const t=this.add.image(0,0,e.name).setData("category",e.category).setInteractive({draggable:!0}).setName(e.name).setOrigin(.5,.1),s=Math.min(90/t.width,90/t.height);return t.setScale(s),this.input.setDraggable(t),t}));this.totalItems=a.length,a.forEach((e=>{e.setAlpha(0),this.tweens.add({targets:e,alpha:1,duration:500,delay:Phaser.Math.Between(0,300)})}));const o=this.add.image(e/2,240,"shelf").setOrigin(.5,.5);o.setDisplaySize(920,40),o.setDepth(0);const n=this.add.image(e/2,380,"shelf").setOrigin(.5,.5);n.setDisplaySize(920,40),n.setDepth(0),Phaser.Utils.Array.Shuffle(a),Phaser.Actions.GridAlign(a,{width:7,cellWidth:120,cellHeight:120,x:110,y:140}),this.setupAssistAnimation(a),a.forEach((e=>{let t=null,s=null;e.setData("used",!1),e.on("pointerover",(()=>{e.getData("used")||(t=e.scene.time.delayedCall(2e3,(()=>{const t=e.getData("category");s=e.scene.add.text(e.x,e.y-20,`Κατηγορία: ${t}`,{fontSize:"18px",color:"#ffffff",backgroundColor:"#000000",padding:{x:10,y:5}}).setOrigin(.5).setDepth(3e3)})))})),e.on("pointerout",(()=>{t&&(t.remove(!1),t=null),s&&(s.destroy(),s=null)})),e.on("dragstart",(()=>{t&&(t.remove(!1),t=null),s&&(s.destroy(),s=null)})),e.setDepth(1)})),this.input.on("dragstart",((e,t)=>{this.input.manager.canvas.style.cursor="grabbing",t.setDepth(1e3)})),this.input.on("drag",((e,t,s,i)=>{this.input.manager.canvas.style.cursor="default",t.x=s,t.y=i})),this.input.on("dragend",((e,t,s)=>{this.input.manager.canvas.style.cursor="default",s||(t.setDepth(0),t.setPosition(t.input.dragStartX,t.input.dragStartY))})),this.input.on("drop",((e,t,s)=>{t.getData("category")===s.getData("category")?(t.disableInteractive(),t.setPosition(s.x,s.y),this.correctSound.play(),this.correctCount++,t.setData("used",!0),this.correctCount===this.totalItems&&this.onLevelComplete()):(t.setPosition(t.input.dragStartX,t.input.dragStartY),this.wrongSound.play())}))}setupAssistAnimation(e){const t=e.find((e=>e.getData("category")===this.levelData.categories[0])),s=this.dropZones[this.levelData.categories[0]];t&&s&&(t.getData("originalX")||(t.setData("originalX",t.x),t.setData("originalY",t.y)),this.tweens.add({targets:t,x:s.x,y:s.y,duration:1e3,yoyo:!0,repeat:0,delay:500,onStart:()=>t.setDepth(2e3),onComplete:()=>{t.setPosition(t.getData("originalX"),t.getData("originalY")),t.setDepth(1)}}))}createSoundToggle(){let e=!0;const t=this.add.image(80,50,"soundOn").setDisplaySize(50,50).setOrigin(1,0).setInteractive({useHandCursor:!0}).setDepth(1e3);t.on("pointerdown",(()=>{e=!e,t.setTexture(e?"soundOn":"soundOff"),this.sound.mute=!e}))}createHelpIcon(){this.add.text(this.scale.width-30,50,"?",{fontSize:"32px",color:"#000",backgroundColor:"#fff",padding:{x:10,y:5}}).setOrigin(1,0).setDepth(1e3).setInteractive({useHandCursor:!0}).on("pointerdown",(()=>this.showHelpPanel()))}showHelpPanel(){if(this.helpPanelOpen)return;this.helpPanelOpen=!0;const e=this.scale.width/2,t=this.scale.height/2,s=this.add.graphics().setDepth(2e3);s.fillStyle(0,.4),s.fillRoundedRect(e-250+4,t-140+4,500,280,20),s.fillStyle(2236962,.95),s.fillRoundedRect(e-250,t-140,500,280,20);const i=this.add.text(e,t,"Σύρε τα αντικείμενα στη σωστή κατηγορία\nκαι διασκέδασε μαθαίνοντας!\n\nΑν κάνεις λάθος, μην ανησυχείς, \nμπορείς πάντα να προσπαθήσεις ξανά!",{fontSize:"20px",fontFamily:"Arial",color:"#ffffff",align:"center",wordWrap:{width:420},lineSpacing:8}).setOrigin(.5).setDepth(2001),a=this.add.text(e+250-16,t-140+16,"✕",{fontSize:"24px",fontFamily:"Arial",color:"#ffffff",backgroundColor:"#cc3333",padding:{left:10,right:10,top:4,bottom:4}}).setOrigin(1,0).setInteractive({useHandCursor:!0}).setDepth(2002);a.on("pointerover",(()=>a.setStyle({backgroundColor:"#ff4444"}))),a.on("pointerout",(()=>a.setStyle({backgroundColor:"#cc3333"}))),a.on("pointerdown",(()=>{s.destroy(),i.destroy(),a.destroy(),this.helpPanelOpen=!1}))}onLevelComplete(){this.victorySound.play();const e=this.scale.width,t=this.scale.height,s=this.add.graphics().setDepth(1e3);s.fillStyle(0,.4),s.fillRoundedRect(e/2-202,t/2-102,404,204,20),s.fillStyle(3355443,.9),s.fillRoundedRect(e/2-200,t/2-100,400,200,20);const i=this.add.text(e/2,t/2,"Το ολοκλήρωσες με επιτυχία.\nΣυγχαρητήρια!",{fontSize:"26px",fontFamily:"Arial",color:"#ffffff",align:"center",wordWrap:{width:360},lineSpacing:10}).setOrigin(.5).setDepth(1001);this.time.delayedCall(5e3,(()=>{s.destroy(),i.destroy(),this.scene.start("Game")}))}createExitButton(){const e=this.add.text(this.scale.width-80,50,"Έξοδος",{fontSize:"24px",color:"#ffffff",backgroundColor:"#cc0000",padding:{x:10,y:7},fontFamily:"Arial"}).setOrigin(1,0).setInteractive({useHandCursor:!0}).setDepth(1e3);e.on("pointerover",(()=>e.setStyle({backgroundColor:"#ff3333"}))),e.on("pointerout",(()=>e.setStyle({backgroundColor:"#cc0000"}))),e.on("pointerdown",(()=>{this.scene.start("Game")}))}}class d extends a.Scene{constructor(){super({key:"FindThePairs"}),t(this,"cardNames",["card-0","card-1","card-2","card-3","card-4","card-5","card-6","card-7"]),t(this,"cards",[]),t(this,"cardOpened"),t(this,"canMove",!1),t(this,"lives",0),t(this,"gridConfiguration",{x:200,y:150,paddingX:20,paddingY:20}),t(this,"mainTitleColor","#7f8ecc"),t(this,"mainTitleStrokeColor","#dbdff0"),t(this,"hilightedTitleColor","#d1d5e9"),t(this,"hilightedStrokeColor","#7689d5"),t(this,"strokeWidth",4),t(this,"difficultySettings",{Easy:{lives:10,rows:3,cols:4},Medium:{lives:9,rows:3,cols:4},Hard:{lives:8,rows:3,cols:4},Expert:{lives:7,rows:3,cols:4}}),t(this,"selectedDifficulty",{lives:0,rows:0,cols:0}),t(this,"helpPanelOpen",!1),t(this,"mute",!1)}init(e){this.cameras.main.fadeIn(500),e.level&&(this.selectedDifficulty=this.difficultySettings[e.level])}preload(){this.load.setPath("assets/audio"),this.load.audio("theme-song","fat-caps-audionatix.mp3"),this.load.audio("whoosh","whoosh.mp3"),this.load.audio("card-flip","card-flip.mp3"),this.load.audio("card-match","card-match.mp3"),this.load.audio("card-mismatch","card-mismatch.mp3"),this.load.audio("card-slide","card-slide.mp3"),this.load.audio("victory","victory.mp3"),this.load.setPath("assets/images/cards"),this.load.image("card-back","card-back.png"),this.cardNames.forEach((e=>{this.load.image(e,`${e}.png`)})),this.load.setPath("assets/ui"),this.load.image("volume-icon","volume-icon.png"),this.load.image("volume-icon_off","volume-icon_off.png"),this.load.image("heart","heart.png"),this.load.image("back-button","back-button.png")}create(){this.createHelpIcon(),this.backButton(),this.volumeButton();const e=this.add.text(this.sys.game.scale.width/2,-1e3,"YOU WON",{align:"center",strokeThickness:4,fontSize:40,fontStyle:"bold",color:"#8c7ae6"}).setOrigin(.5).setDepth(3).setInteractive(),t=this.add.text(this.sys.game.scale.width/2,-1e3,"GAME OVER\nClick to restart",{align:"center",strokeThickness:4,fontSize:40,fontStyle:"bold",color:"#ff0000"}).setName("gameOverText").setDepth(3).setOrigin(.5).setInteractive();this.lives=this.selectedDifficulty.lives;const s=this.createHearts();this.cards=this.createGridCards(),this.cards.forEach((e=>{e.gameObject.on(Phaser.Input.Events.POINTER_OVER,(()=>{this.input.setDefaultCursor("pointer")})),e.gameObject.on(Phaser.Input.Events.POINTER_OUT,(()=>{this.input.setDefaultCursor("default")})),e.gameObject.on(Phaser.Input.Events.POINTER_DOWN,(()=>{this.gameLogic(e,s,t)}))})),this.time.addEvent({delay:200*this.cards.length,callback:()=>{this.canMove=!0}}),e.on(Phaser.Input.Events.POINTER_OVER,(()=>{e.setColor("#FF7F50"),this.input.setDefaultCursor("pointer")})),e.on(Phaser.Input.Events.POINTER_OUT,(()=>{e.setColor("#8c7ae6"),this.input.setDefaultCursor("default")})),e.on(Phaser.Input.Events.POINTER_DOWN,(()=>{this.sound.play("whoosh",{volume:1.3}),this.add.tween({targets:e,ease:Phaser.Math.Easing.Bounce.InOut,y:-1e3,onComplete:()=>{this.restartGame()}})})),t.on(Phaser.Input.Events.POINTER_OVER,(()=>{t.setColor("#FF7F50"),this.input.setDefaultCursor("pointer")})),t.on(Phaser.Input.Events.POINTER_OUT,(()=>{t.setColor("#8c7ae6"),this.input.setDefaultCursor("default")})),t.on(Phaser.Input.Events.POINTER_DOWN,(()=>{this.add.tween({targets:t,ease:Phaser.Math.Easing.Bounce.InOut,y:-1e3,onComplete:()=>{this.restartGame()}})}))}gameLogic(e,t,s){if(this.canMove=!1,void 0!==this.cardOpened){if(this.cardOpened.gameObject.x===e.gameObject.x&&this.cardOpened.gameObject.y===e.gameObject.y)return void(this.canMove=!0);e.flip((()=>{var i,a;if((null==(i=this.cardOpened)?void 0:i.cardName)===e.cardName)this.sound.play("card-match"),this.cardOpened.destroy(),e.destroy(),this.cards=this.cards.filter((t=>t.cardName!==e.cardName)),this.cardOpened=void 0,this.canMove=!0;else{this.sound.play("card-mismatch"),this.cameras.main.shake(600,.01);const s=t[t.length-1];this.add.tween({targets:s,ease:Phaser.Math.Easing.Expo.InOut,duration:1e3,y:-1e3,onComplete:()=>{s.destroy(),t.pop()}}),this.lives-=1,e.flip(),null==(a=this.cardOpened)||a.flip((()=>{this.cardOpened=void 0,this.canMove=!0}))}0===this.lives&&(this.sound.play("whoosh",{volume:1.3}),this.add.tween({targets:s,ease:Phaser.Math.Easing.Bounce.Out,y:this.sys.game.scale.height/2}),this.canMove=!1),0===this.cards.length&&(this.sound.play("whoosh",{volume:1.3}),this.sound.play("victory"),this.add.tween({targets:winnerText,ease:Phaser.Math.Easing.Bounce.Out,y:this.sys.game.scale.height/2}),this.canMove=!1)}))}else void 0===this.cardOpened&&this.lives>0&&this.cards.length>0&&(e.flip((()=>{this.canMove=!0})),this.cardOpened=e)}restartGame(){this.cardOpened=void 0,this.cameras.main.fadeOut(200*this.cards.length),this.cards.reverse().map(((e,t)=>{this.add.tween({targets:e.gameObject,duration:500,y:1e3,delay:100*t,onComplete:()=>{e.gameObject.destroy()}})})),this.time.addEvent({delay:200*this.cards.length,callback:()=>{this.cards=[],this.canMove=!1,this.scene.restart(),this.sound.play("card-slide",{volume:1.2})}})}createGridCards(){const{rows:e,cols:t}=this.selectedDifficulty,s=e*t,i=Phaser.Utils.Array.Shuffle(this.cardNames).slice(0,s/2),a=Phaser.Utils.Array.Shuffle([...i,...i]),o=.85,n=this.gridConfiguration.paddingX*o,r=this.gridConfiguration.paddingY*o,h=((this.sys.game.scale.width-800)/2+10)*o,c=((this.sys.game.scale.height-600)/2+5)*o,d=(800-(t*(158+n)-n))/2+79+h,l=(600-(e*(204+r)-r))/2+102+c;return a.map(((e,s)=>{const i=s%t,a=Math.floor(s/t),o=d+i*(158+n),h=l+a*(204+r),c=this.createCard({scene:this,x:o,y:-1e3,frontTexture:e,cardName:e,scale:1});return this.add.tween({targets:c.gameObject,duration:800,delay:100*s,y:h,onStart:()=>this.sound.play("card-slide",{volume:1.2})}),c}))}createHearts(){const e=this.sys.game.scale.width/2-50*this.selectedDifficulty.lives/2+25;return Array.from(new Array(this.lives)).map(((t,s)=>{const i=this.add.image(this.sys.game.scale.width+1e3,20,"heart").setScale(2);return this.add.tween({targets:i,ease:Phaser.Math.Easing.Expo.InOut,duration:1e3,delay:1e3+200*s,x:e+50*s}),i}))}showHelpPanel(){if(this.helpPanelOpen)return;this.helpPanelOpen=!0;const e=this.scale.width/2,t=this.scale.height/2,s=this.add.graphics().setDepth(2e3);s.fillStyle(0,.4),s.fillRoundedRect(e-250+4,t-140+4,500,280,20),s.fillStyle(2236962,.95),s.fillRoundedRect(e-250,t-140,500,280,20);const i=this.add.text(e,t,"Ανακάλυψε τα ζευγάρια καρτών\nκαι διασκέδασε μαθαίνοντας!\n\nΑν κάνεις λάθος, μην ανησυχείς, \nμπορείς πάντα να προσπαθήσεις ξανά!",{fontSize:"20px",fontFamily:"Arial",color:"#ffffff",align:"center",wordWrap:{width:420},lineSpacing:8}).setOrigin(.5).setDepth(2001),a=this.add.text(e+250-16,t-140+16,"✕",{fontSize:"24px",fontFamily:"Arial",color:"#ffffff",backgroundColor:"#cc3333",padding:{left:10,right:10,top:4,bottom:4}}).setOrigin(1,0).setInteractive({useHandCursor:!0}).setDepth(2002);a.on("pointerover",(()=>a.setStyle({backgroundColor:"#ff4444"}))),a.on("pointerout",(()=>a.setStyle({backgroundColor:"#cc3333"}))),a.on("pointerdown",(()=>{s.destroy(),i.destroy(),a.destroy(),this.helpPanelOpen=!1}))}createHelpIcon(){this.add.text(this.scale.width-10,5,"?",{fontSize:"32px",color:"#ffffff",backgroundColor:"#5c7fd6",padding:{x:10,y:5}}).setOrigin(1,0).setDepth(1e3).setInteractive({useHandCursor:!0}).on("pointerdown",(()=>this.showHelpPanel()))}volumeButton(){const e=this.add.image(25,40,"volume-icon").setName("volume-icon");e.setInteractive(),e.on(Phaser.Input.Events.POINTER_OVER,(()=>{this.input.setDefaultCursor("pointer")})),e.on(Phaser.Input.Events.POINTER_OUT,(()=>{this.input.setDefaultCursor("default")})),e.on(Phaser.Input.Events.POINTER_DOWN,(()=>{this.mute?(this.sound.setVolume(1),e.setTexture("volume-icon"),e.setAlpha(1),this.mute=!1):(this.sound.setVolume(0),e.setTexture("volume-icon_off"),e.setAlpha(.5),this.mute=!0)}))}backButton(){const e=this.add.image(25,100,"back-button").setName("back-button").setInteractive();e.on(Phaser.Input.Events.POINTER_OVER,(()=>{this.input.setDefaultCursor("pointer")})),e.on(Phaser.Input.Events.POINTER_OUT,(()=>{this.input.setDefaultCursor("default")})),e.on(Phaser.Input.Events.POINTER_DOWN,(()=>{this.sound.play("whoosh",{volume:1.3}),this.scene.start("MainMenu")}))}createCard({scene:e,x:t,y:s,frontTexture:i,cardName:a,scale:o=1}){let n=!1;const r={y:0},h="card-back",c=e.add.plane(t,s,h).setName(a).setInteractive().setScale(o);return c.modelRotationY=180,{gameObject:c,flip:t=>{n||e.add.tween({targets:[r],y:180===r.y?0:180,ease:Phaser.Math.Easing.Expo.Out,duration:500,onStart:()=>{n=!0,e.sound.play("card-flip"),e.tweens.chain({targets:c,ease:Phaser.Math.Easing.Expo.InOut,tweens:[{duration:200,scale:1.1},{duration:300,scale:1}]})},onUpdate:()=>{c.rotateY=180+r.y;const e=Math.floor(c.rotateY)%360;e>=0&&e<=90||e>=270&&e<=359?c.setTexture(i):c.setTexture(h)},onComplete:()=>{n=!1,t&&t()}})},destroy:()=>{e.add.tween({targets:[c],y:c.y-1e3,easing:Phaser.Math.Easing.Elastic.In,duration:500,onComplete:()=>{c.destroy()}})},cardName:a}}}function l(e){if("string"!=typeof e)return e;const t=document.createElement("textarea");return t.innerHTML=e,t.value}const u=l("Τι βλέπεις στην φωτογραφία;"),p=l("Άσκηση αντιστοίχισης"),g=l('Επέλεξε τις λέξεις δίπλα στις εικόνες.<br />Μόλις τελειώσεις πάτα "Έλεγχος".'),m=l("Έλεγχος"),f=l(":-)"),y=l("X");l("Βαθμολογία: ");const v=l("Μπράβο!"),w=l("Λυπάμαι! Δοκίμασε ξανά."),P=l("???"),b=[{id:0,imageKey:"dog",imagePath:"assets/images/name-the-picture/adorable-animal-breed-981062.jpg",correctAnswer:l("Σκύλος")},{id:1,imageKey:"car",imagePath:"assets/images/name-the-picture/adventure-automobile-car-849835.jpg",correctAnswer:l("Αμάξι")},{id:2,imageKey:"cat",imagePath:"assets/images/name-the-picture/manja-vitolic-gKXKBY-C-Dk-unsplash.jpg",correctAnswer:l("Γάτα")},{id:3,imageKey:"flag",imagePath:"assets/images/name-the-picture/america-american-flag-blue-sky-951382.jpg",correctAnswer:l("Σημαία")},{id:4,imageKey:"camera",imagePath:"assets/images/name-the-picture/aperture-blur-bokeh-1561081.jpg",correctAnswer:l("Φωτογραφική μηχανή")},{id:5,imageKey:"coffee",imagePath:"assets/images/name-the-picture/art-blur-cappuccino-302899.jpg",correctAnswer:l("Φλυτζάνι με καφέ")},{id:6,imageKey:"biscuits",imagePath:"assets/images/name-the-picture/background-black-colors-239581.jpg",correctAnswer:l("Μπισκότα")},{id:7,imageKey:"sandwich",imagePath:"assets/images/name-the-picture/beef-blur-bread-1053769.jpg",correctAnswer:l("Χάμπουγκερ-Σάντουιτς")},{id:8,imageKey:"watermelon",imagePath:"assets/images/name-the-picture/close-up-delicious-fruit-1068534.jpg",correctAnswer:l("Καρπούζι")},{id:9,imageKey:"motorbike",imagePath:"assets/images/name-the-picture/bike-broken-city-1045535.jpg",correctAnswer:l("Μηχανή"),imageHeight:100}],x=[];b.forEach((e=>{x.includes(e.correctAnswer)||x.push(e.correctAnswer)})),o.Utils.Array.Shuffle(x);const k=140;class O extends o.Scene{constructor(){super({key:"NameThePictureScene"}),t(this,"itemsToDisplayThisRound",[]),t(this,"selectedAnswers",{}),t(this,"itemElements",[]),t(this,"score",0),t(this,"gameEnded",!1),t(this,"wordChoicePanel",null),t(this,"activeItemElementForPanel",null),t(this,"checkButton"),t(this,"feedbackPopup",null),t(this,"levelKey")}init(e={}){this.levelKey=e.level,this.gameEnded=!1,this.score=0,this.itemsToDisplayThisRound=[],this.selectedAnswers={},this.itemElements.forEach((e=>{e.rowContainer&&e.rowContainer.scene&&e.rowContainer.destroy()})),this.itemElements=[],this.wordChoicePanel&&this.wordChoicePanel.scene&&this.wordChoicePanel.destroy(),this.wordChoicePanel=null,this.activeItemElementForPanel=null,this.checkButton&&this.checkButton.scene&&this.checkButton.destroy(),this.feedbackPopup&&this.feedbackPopup.scene&&this.feedbackPopup.destroy(),this.feedbackPopup=null}preload(){b.forEach((e=>{this.textures.exists(e.imageKey)||this.load.image(e.imageKey,e.imagePath)}))}create(){const e=this.cameras.main.width,t=this.cameras.main.height;let s=o.Utils.Array.Shuffle([...b]);this.itemsToDisplayThisRound=s.slice(0,4);const i=this.itemsToDisplayThisRound.findIndex((e=>"cat"===e.imageKey));if(i>-1&&i<3){const e=this.itemsToDisplayThisRound.splice(i,1)[0];this.itemsToDisplayThisRound.push(e)}let a=30;this.add.text(e/2,a,u,{fontSize:"28px",color:"#000000",fontStyle:"bold",align:"center",wordWrap:{width:e-80}}).setOrigin(.5,0),a+=36,this.add.text(e/2,a,p,{fontSize:"20px",color:"#111111",align:"center",wordWrap:{width:e-80}}).setOrigin(.5,0),a+=32,g.replace(/<br \/>/g,"\n").split("\n").forEach((t=>{this.add.text(e/2,a,t,{fontSize:"16px",color:"#333333",align:"center",wordWrap:{width:e-80}}).setOrigin(.5,0),a+=20}));let n=0;this.itemsToDisplayThisRound.forEach((e=>{const t=this.textures.get(e.imageKey).getSourceImage();let s=t.height/t.width*k;e.imageHeight&&(s=e.imageHeight),n+=s+8+6+20})),this.itemsToDisplayThisRound.length>0&&(n-=20);const r=t-a,h=a+Math.max(20,(r-n)/2);let c=h,d=0;this.itemsToDisplayThisRound.forEach((e=>{const t=this.add.container(60,c),s=this.textures.get(e.imageKey).getSourceImage();let i=s.height/s.width*k;e.imageHeight&&(i=e.imageHeight);const a=i+8,n=this.add.graphics();n.lineStyle(3,8947848,1),n.strokeRect(-4,-i/2-4,148,a),t.add(n);const r=this.add.image(0,0,e.imageKey).setOrigin(0,.5);r.setDisplaySize(e.imageWidth||k,i),t.add(r);const h=this.add.text(163,0,P,{fontSize:"17px",color:"#0000FF",backgroundColor:"#EEEEEE",padding:{x:10,y:5},fixedWidth:210,align:"center"}).setOrigin(0,.5).setInteractive({useHandCursor:!0});t.add(h);const l={id:e.id,imageSprite:r,answerTextSprite:h,feedbackTextSprite:null,rowContainer:t,imageBorderGfx:n};this.itemElements.push(l),this.selectedAnswers[e.id]=null,h.on(o.Input.Events.POINTER_DOWN,(()=>{if(this.gameEnded||this.feedbackPopup&&this.feedbackPopup.active)return;this.activeItemElementForPanel=l;const e=l.answerTextSprite.getBounds();this.showWordChoicePanel(e.right+10,e.top-5)}));const u=a+6;c+=u+20,d+=u+20})),this.itemsToDisplayThisRound.length>0&&(d-=20);const l=e-80-75,f=h+d/2;this.checkButton=this.add.text(l,f,m,{fontSize:"20px",color:"#FFFFFF",backgroundColor:"#28a745",padding:{x:20,y:10},fixedWidth:150,align:"center"}).setOrigin(.5,.5),this.checkButton.setInteractive({useHandCursor:!0}),this.checkButton.on(o.Input.Events.POINTER_DOWN,(()=>{this.gameEnded||this.feedbackPopup&&this.feedbackPopup.active||(this.checkButton.setActive(!1).setAlpha(.7),this.checkAllAnswers())}))}showWordChoicePanel(e,t){this.wordChoicePanel&&this.wordChoicePanel.scene&&this.wordChoicePanel.destroy(),this.wordChoicePanel=null;const s=10,i=250,a=35*x.length+20;let n=e,r=t;n+i>this.cameras.main.width-s&&(this.activeItemElementForPanel?(n=this.activeItemElementForPanel.answerTextSprite.getBounds().left-i-s,n<s&&(n=s)):n=this.cameras.main.width-i-s),n<s&&(n=s),r+a>this.cameras.main.height-s&&(r=this.cameras.main.height-a-s),r<s&&(r=s),this.wordChoicePanel=this.add.container(n,r),this.wordChoicePanel.setDepth(1e3);const h=this.add.graphics();h.fillStyle(16316922,.98),h.fillRoundedRect(0,0,i,a,8),h.lineStyle(1,11384253,1),h.strokeRoundedRect(0,0,i,a,8),this.wordChoicePanel.add(h),x.forEach(((e,t)=>{const i=this.add.text(s,s+35*t,e,{fontSize:"17px",color:"#212529",padding:{top:8,bottom:10,x:8},fixedWidth:230,align:"left"}).setInteractive({useHandCursor:!0});i.on(o.Input.Events.POINTER_OVER,(()=>i.setBackgroundColor("#E9ECEF"))),i.on(o.Input.Events.POINTER_OUT,(()=>i.setBackgroundColor("rgba(0,0,0,0)"))),i.on(o.Input.Events.POINTER_DOWN,(()=>{this.activeItemElementForPanel&&(this.activeItemElementForPanel.answerTextSprite.setText(e),this.selectedAnswers[this.activeItemElementForPanel.id]=e),this.wordChoicePanel&&this.wordChoicePanel.scene&&this.wordChoicePanel.destroy(),this.wordChoicePanel=null,this.activeItemElementForPanel=null})),this.wordChoicePanel&&this.wordChoicePanel.add(i)}))}checkAllAnswers(){if(this.gameEnded)return;this.gameEnded=!0,this.wordChoicePanel&&this.wordChoicePanel.scene&&this.wordChoicePanel.destroy(),this.wordChoicePanel=null;let e=0;const t=this.itemsToDisplayThisRound.length;this.itemElements.forEach((t=>{const s=b.find((e=>e.id===t.id));if(!s)return;const i=this.selectedAnswers[t.id]===s.correctAnswer,a=i?f:y,o=i?52224:16711680;t.imageBorderGfx.clear(),t.imageBorderGfx.lineStyle(3,o,1);const n=this.textures.get(t.imageSprite.texture.key).getSourceImage();let r=n.height/n.width*k;const h=this.itemsToDisplayThisRound.find((e=>e.id===t.id));h&&h.imageHeight&&(r=h.imageHeight);const c=r+8;t.imageBorderGfx.strokeRect(-4,-r/2-4,148,c),t.feedbackTextSprite&&t.feedbackTextSprite.scene&&t.feedbackTextSprite.destroy();const d=t.answerTextSprite.x+t.answerTextSprite.width;t.feedbackTextSprite=this.add.text(d+8,t.answerTextSprite.y,a,{fontSize:"20px",color:i?"#009900":"#FF0000",fontStyle:"bold"}).setOrigin(0,.5),t.rowContainer.add(t.feedbackTextSprite),t.answerTextSprite.disableInteractive().setColor("#555555"),i&&e++})),this.score=Math.floor(e/t*100);let s="";s+=100===this.score?v:w,this.showFeedbackPopup(s)}showFeedbackPopup(e){this.feedbackPopup&&this.feedbackPopup.scene&&this.feedbackPopup.destroy();const t=this.cameras.main.width,s=.45*t,i=t/2+s/2,a=this.checkButton.y-this.checkButton.height*this.checkButton.originY-15-90;this.feedbackPopup=this.add.container(i,a),this.feedbackPopup.setDepth(900);const n=this.add.graphics();n.fillStyle(16448250,.97),n.fillRoundedRect(-s/2,-90,s,180,10),n.lineStyle(2,13421772,1),n.strokeRoundedRect(-s/2,-90,s,180,10),this.feedbackPopup.add(n);const r=this.add.text(0,-65,e,{fontSize:"17px",color:"#333333",align:"center",wordWrap:{width:s-40}}).setOrigin(.5,0);this.feedbackPopup.add(r);const h=this.add.text(-s/4,37,"Παίξε Ξανά",{fontSize:"15px",color:"#FFFFFF",backgroundColor:"#17A2B8",padding:{x:10,y:11.5},fixedWidth:s/2.2-20,align:"center"}).setOrigin(.5).setInteractive({useHandCursor:!0});h.on(o.Input.Events.POINTER_DOWN,(()=>{this.feedbackPopup&&this.feedbackPopup.scene&&this.feedbackPopup.destroy(),this.feedbackPopup=null,this.scene.restart()})),this.feedbackPopup.add(h);const c=this.add.text(s/4,37,"Κλείσιμο",{fontSize:"15px",color:"#FFFFFF",backgroundColor:"#6C757D",padding:{x:10,y:11.5},fixedWidth:s/2.2-20,align:"center"}).setOrigin(.5).setInteractive({useHandCursor:!0});c.on(o.Input.Events.POINTER_DOWN,(()=>{this.feedbackPopup&&this.feedbackPopup.scene&&this.feedbackPopup.destroy(),this.feedbackPopup=null,this.scene.start("Game")})),this.feedbackPopup.add(c)}}class E extends a.Scene{constructor(){super("GameOver"),t(this,"camera"),t(this,"background"),t(this,"gameover_text")}create(){this.camera=this.cameras.main,this.camera.setBackgroundColor(16711680),this.background=this.add.image(512,384,"background"),this.background.setAlpha(.5),this.gameover_text=this.add.text(512,384,"Game Over",{fontFamily:"Arial Black",fontSize:64,color:"#ffffff",stroke:"#000000",strokeThickness:8,align:"center"}),this.gameover_text.setOrigin(.5),this.input.once("pointerdown",(()=>{this.scene.start("MainMenu")}))}}const S={type:a.AUTO,width:1024,height:768,parent:"game-container",backgroundColor:"#028af8",scene:[n,r,c,h,d,O,E,a.Game]};document.addEventListener("DOMContentLoaded",(()=>{new a.Game({...S,parent:"game-container"})}));
